<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>iPista (Web) • SeasonSchedule</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header class="topo">
    <div>
      <div class="titulo">iPista (Web)</div>
      <div class="sub">Offline (GitHub Pages) lendo o PDF do repositório</div>
    </div>
    <div class="status">
      <span class="dot" id="dot"></span>
      <span id="statusTxt">Aguardando…</span>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <div class="grid">
        <div class="field">
          <label>Pista</label>
          <div class="lookup">
            <input id="trackInput" type="text" placeholder="Digite para filtrar (contém)..." autocomplete="off" />
            <button id="toggleDrop" type="button" title="Abrir lista">▼</button>
          </div>
          <div id="dropdown" class="dropdown" hidden></div>
          <div class="hint">Dicas: ↓ abre, ↑/↓ navega, Enter seleciona, Esc limpa/fecha. O foco fica no campo.</div>
        </div>

        <div class="field">
          <label>Filtrar série (opcional)</label>
          <input id="seriesFilter" type="text" placeholder="Ex.: mx-5, porsche, nascar..." autocomplete="off" />
          <div class="hint">Filtro “contém” no nome da série.</div>
        </div>

        <div class="field checks">
          <label>Categorias</label>
          <div class="checkrow" id="cats"></div>
        </div>

        <div class="field checks">
          <label>Classes</label>
          <div class="checkrow" id="classes"></div>
        </div>

        <div class="actions">
          <button id="btnClear" type="button">Limpar</button>
          <button id="btnSearch" type="button" class="primary">Buscar</button>
        </div>
      </div>

      <div class="loading" id="loading" hidden>
        <div class="spinner"></div>
        <div>
          <div class="loadingTitle">Aguarde…</div>
          <div class="loadingSub" id="loadingSub">Lendo o PDF…</div>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="resultTop">
        <div>
          <div class="resultTitle" id="resultTitle">Pista: (nenhuma)</div>
          <div class="resultSub" id="resultSub"></div>
        </div>
        <div class="small" id="cacheInfo"></div>
      </div>

      <div class="tableWrap">
        <table class="tbl">
          <thead>
            <tr>
              <th>Início da semana</th>
              <th>Week</th>
              <th>Categoria</th>
              <th>Classe</th>
              <th>Série</th>
              <th>Carros</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <tr><td colspan="6" class="empty">Carregando…</td></tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- PDF.js via CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.10.38/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc =
      "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.10.38/pdf.worker.min.js";
  </script>

  <script src="js/app.js"></script>
</body>
</html>
